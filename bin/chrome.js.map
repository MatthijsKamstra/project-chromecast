{
"version":3,
"file":"chrome.js",
"sourceRoot":"file:///",
"sources":["/Users/matthijs/Documents/workingdir/haxe/project-chromecast/src/MainChrome.hx"],
"sourcesContent":["\npackage;\n\nimport js.npm.castv2client.Client;\nimport js.npm.castv2client.DefaultMediaReceiver;\nimport js.npm.castv2client.Mdns;\n\n\nimport js.Browser.*;\nimport js.Browser.console;\nimport js.html.Window.*;\n// import js.html.Window.setTimeout;\n\nclass MainChrome {\n\n\t// var Client                = new Client();\n\t// var DefaultMediaReceiver  = new DefaultMediaReceiver();\n\t// var mdns                  = new Mdns();\n\n\tvar mdns:Mdns;\n\tvar browser : Browser;\n\n\tpublic function new() {\n\n\t\tvar mdns = untyped require('mdns');\n\t\tbrowser = untyped mdns.createBrowser(mdns.tcp('googlecast'));\n\n\t\tbrowser.on('serviceUp', function(service) {\n\t\t\ttrace(service);\n\t\t\ttrace('found device \"${service.name}\" at ${service.addresses[0]}:${ service.port}'); // \"Chromecast-10c9202216273171bda7522fc5d8cf52\" at 192.168.2.1:8009\n\t\t\t// trace('found device \"%s\" at %s:%d', service.name, service.addresses[0], service.port);\n\t\t\tondeviceup(service.addresses[0]);\n\t\t\tbrowser.stop();\n\t\t});\n\n\t\tbrowser.start();\n\t}\n\n\tfunction ondeviceup(host) {\n\n\t\ttrace(host);\n\n\t\t// untyped __js__ (\"var DefaultMediaReceiver  = require('castv2-client').DefaultMediaReceiver;\");\n\t\tvar DefaultMediaReceiver  = js.Lib.require('castv2-client').DefaultMediaReceiver;\n\n\t\t// var defaultMediaReceiver  = new DefaultMediaReceiver();\n\t\tvar client = new Client();\n\n\t\tclient.connect(host, function() {\n\t\t\ttrace('connected, launching app ...');\n\n\t\t\tclient.launch(DefaultMediaReceiver, function(err, player) {\n\t\t\t\tvar media = {\n\n\t\t\t\t\t// Here you can plug an URL to any mp4, webm, mp3 or jpg file with the proper contentType.\n\t\t\t\t\tcontentId: 'http://commondatastorage.googleapis.com/gtv-videos-bucket/big_buck_bunny_1080p.mp4',\n\t\t\t\t\tcontentType: 'video/mp4',\n\t\t\t\t\tstreamType: 'BUFFERED', // or LIVE\n\n\t\t\t\t\t// Title and cover displayed while buffering\n\t\t\t\t\tmetadata: {\n\t\t\t\t\t\ttype: 0,\n\t\t\t\t\t\tmetadataType: 0,\n\t\t\t\t\t\ttitle: \"Big Buck Bunny\",\n\t\t\t\t\t\timages: [\n\t\t\t\t\t\t\t{ url: 'http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/images/BigBuckBunny.jpg' }\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tplayer.on('status', function(status) {\n\t\t\t\t\ttrace('status broadcast playerState=${status.playerState}');\n\t\t\t\t});\n\n\t\t\t\ttrace('app \"${player.session.displayName}\" launched, loading media ${media.contentId} ...');\n\n\t\t\t\tplayer.load(media, { autoplay: true }, function(err, status) {\n\t\t\t\t\ttrace('media loaded playerState=${status.playerState}');\n\n\t\t\t\t\t// Seek to 2 minutes after 15 seconds playing.\n\t\t\t\t\tuntyped setTimeout(function() {\n\t\t\t\t\t\tplayer.seek(2*60, function(err, status) {\n\t\t\t\t\t\t\t//\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 15000);\n\n\t\t\t\t});\n\n\t\t\t});\n\n\t\t});\n\n\t\tclient.on('error', function(err) {\n\t\t\ttrace('Error: ${err.message}');\n\t\t\tclient.close();\n\t\t});\n\n\t}\n\n\tstatic public function main() {\n\t\tvar app = new MainChrome();\n\t}\n}"],
"names":[],
"mappings":";;iBAsBQ,WAAe;AAAA,CAAf;CAEN,WAAmB,QAAS;CACS,mBAAU;CAA/C,eAAkB,mBAAmB;CAErC,gBAAY,YAAY,kBAAkB;AAAA,EACzC,YAAM;EACN,YAAO,oBAAgB,eAAa,WAAO,kBAAkB,KAAG,MAAI;EAEpE,kBAAW,kBAAkB;EAC7B;;CAGD;;kBAgEa,WACb;AAAA,WAAU;;;aA9DX,eAA0B;AAAA,EAEzB,YAAM;EAGN,2BAA4B,QAAgB;EAG5C,aAAa;EAEb,eAAe,KAAM,WAAW;AAAA,GAC/B,YAAO;GAEP,cAAc,qBAAsB,qBAAsB;AAAA,IACzD,YAAY,cAGC,oGACE,0BACD,uBAGH,SACH,kBACQ,WACP,2BACC,CACP,QAAQ;IAKX,UAAW,SAAS,iBACnB;AAAA,iBAAO,kCAA+B;;IAGvC,YAAO,WAAO,6BAA2B,gCAA4B,kBAAgB;IAErF,YAAY,MAAO,aAAY,MAAQ,uBAAsB;AAAA,KAC5D,YAAO,8BAA2B;KAG1B,WAAW,WAClB;AAAA,kBAAY,IAAM,uBAAsB;AAAA;OAGtC;;;;EAQN,UAAW,QAAQ,eAAc;AAAA,GAChC,YAAO,YAAS;GAChB;;;;;;;;"
}